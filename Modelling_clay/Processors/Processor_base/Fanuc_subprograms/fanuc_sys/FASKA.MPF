%
< FASKA >
(#40=100. (X))
(#41=0. (Y))
(#42=-1. (Z1))
(#43=-5 (Z2))
;
(#44= 15.    (R1 geometry))
(#45= 12.    (R2 geometry))
(#46= 10.    (R tool))
(#47 = 0.4   (RendTool))
;
(#48 = 20. (dots per ring))
(#49 = 0.1   (Z step))
;
(#50 = 1 (0 - DNO, 1 - otverstie))


#12 = 360./#48(step angle)
#13 = ATAN[[ #44 - #45] / [#42 - #43]] (ANGLE FASK)
#14 = COS[90-#13]*#47 (Z from C_R to contact dot)
#15 = SIN[90-#13]*#47 (X from C_R to contact dot)


#16 = 1 / TAN[#13] * [#47 - #14] - #47 (Xdelta )

#44 = #44 + #16 (increace R1 geometry for RendTool)
X100.Z20.
IF [#50 EQ 1] GOTO 100
#45 = #45 + #16
N100
IF [#50 EQ 0] GOTO 150
#43 = #43 - #47 + #14
#45 = #45 - #15 + #47
N150



#44 = [#44 - #46]
#45 = [#45 - #46]


G0 X[#40] Y[#41]
Z [#42+10.]
M8
G1 Z [#42]
X [#44*2+#40]
#17 = [#42]
#18 = 0
#19 = [[#44-#45]/[#17-#43]*#49/#48](Rdecrement)

WHILE [#17-0.5*#49 GE #43] DO1
#20 = 0. (LE 360)

WHILE [#20 LE 360.01-#12] DO2
G1 X[COS[#20]*#44*2+#40] Y[SIN[#20]*#44+#41] Z[#17]
#17=[#17-[#49/#48]]
#44=#44-#19
#20=#20+#12
END2

#18=#18+1
#17=#42-#18*#49
END1

#20 = 0. (LE 360)
#49=#17-#43
IF [#49 LE 0] GOTO 200
#19 = [[#44-#45]/[#17-#43]*#49/#48](Rdecrement)
WHILE [#20 LE 360.001] DO1
G1 X[COS[#20]*#44*2+#40] Y[SIN[#20]*#44+#41] Z[#17]
#17=[#17-[#49/#48]]
#44=#44-#19
#20=#20+#12
END1
N200
X[#40] Y[#41]
Z[#42+40.]
M99
%